webpackJsonp([1],{"5fhs":function(t,e){t.exports=[{id:"7cd6ff70-96fc-11e8-98d5-a105443a582f",tableid:"c639a38bda48c311fa31dc76a69a386f",connName:"本地",databaseName:"example",name:"sys_role",position:[510,195],nodes:[{id:"7cd6ff71-96fc-11e8-98d5-a105443a582f",name:"id",category:"field",ports:[{direction:"left",id:"7cd7c2c0-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7cd7c2c1-96fc-11e8-98d5-a105443a582f"}]},{id:"7cd6ff72-96fc-11e8-98d5-a105443a582f",name:"role_name",category:"field",ports:[{direction:"left",id:"7cd85f00-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7cd88610-96fc-11e8-98d5-a105443a582f"}]},{id:"7cd6ff73-96fc-11e8-98d5-a105443a582f",name:"create_time",category:"field",ports:[{direction:"left",id:"7cd8d430-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7cd8fb40-96fc-11e8-98d5-a105443a582f"}]},{id:"7cd6ff74-96fc-11e8-98d5-a105443a582f",name:"update_time",category:"field",ports:[{direction:"left",id:"7cd94960-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7cd94961-96fc-11e8-98d5-a105443a582f"}]},{id:"7cd6ff75-96fc-11e8-98d5-a105443a582f",name:"delete_status",category:"field",ports:[{direction:"left",id:"7cd99780-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7cd99781-96fc-11e8-98d5-a105443a582f"}]},{id:"7cd6ff76-96fc-11e8-98d5-a105443a582f",name:"sys_role",category:"table",ports:[{direction:"left",id:"7cd9be90-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7cd9be91-96fc-11e8-98d5-a105443a582f"}]}]},{id:"7c331e50-96fc-11e8-98d5-a105443a582f",databaseName:"db_data_flow",name:"flow_db_info",position:[0,90],nodes:[{id:"7c331e51-96fc-11e8-98d5-a105443a582f",name:"id",category:"field",ports:[{direction:"left",id:"7c3408b0-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7c342fc0-96fc-11e8-98d5-a105443a582f"}]},{id:"7c331e52-96fc-11e8-98d5-a105443a582f",name:"name",category:"field",ports:[{direction:"left",id:"7c34a4f0-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7c34a4f1-96fc-11e8-98d5-a105443a582f"}]},{id:"7c331e53-96fc-11e8-98d5-a105443a582f",name:"host",category:"field",ports:[{direction:"left",id:"7c351a20-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7c354130-96fc-11e8-98d5-a105443a582f"}]},{id:"7c331e54-96fc-11e8-98d5-a105443a582f",name:"port",category:"field",ports:[{direction:"left",id:"7c35b660-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7c35b661-96fc-11e8-98d5-a105443a582f"}]},{id:"7c331e55-96fc-11e8-98d5-a105443a582f",name:"user",category:"field",ports:[{direction:"left",id:"7c360480-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7c362b90-96fc-11e8-98d5-a105443a582f"}]},{id:"7c331e56-96fc-11e8-98d5-a105443a582f",name:"password",category:"field",ports:[{direction:"left",id:"7c3679b0-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7c3679b1-96fc-11e8-98d5-a105443a582f"}]},{id:"7c331e57-96fc-11e8-98d5-a105443a582f",name:"created_at",category:"field",ports:[{direction:"left",id:"7c36eee0-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7c36eee1-96fc-11e8-98d5-a105443a582f"}]},{id:"7c331e58-96fc-11e8-98d5-a105443a582f",name:"updated_at",category:"field",ports:[{direction:"left",id:"7c373d00-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7c376410-96fc-11e8-98d5-a105443a582f"}]},{id:"7c331e59-96fc-11e8-98d5-a105443a582f",name:"flow_db_info",category:"table",ports:[{direction:"left",id:"7c376411-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7c376412-96fc-11e8-98d5-a105443a582f"}]}]},{id:"7d976940-96fc-11e8-98d5-a105443a582f",tableid:"f57edd5f86b50713e6ade1d8639ca17d",connName:"本地",databaseName:"example",name:"sys_role_permission",position:[135,510],nodes:[{id:"7d976941-96fc-11e8-98d5-a105443a582f",name:"id",category:"field",ports:[{direction:"left",id:"7d982c90-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7d982c91-96fc-11e8-98d5-a105443a582f"}]},{id:"7d976942-96fc-11e8-98d5-a105443a582f",name:"role_id",category:"field",ports:[{direction:"left",id:"7d98c8d0-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7d98c8d1-96fc-11e8-98d5-a105443a582f"}]},{id:"7d976943-96fc-11e8-98d5-a105443a582f",name:"permission_id",category:"field",ports:[{direction:"left",id:"7d9916f0-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7d9916f1-96fc-11e8-98d5-a105443a582f"}]},{id:"7d976944-96fc-11e8-98d5-a105443a582f",name:"create_time",category:"field",ports:[{direction:"left",id:"7d996510-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7d996511-96fc-11e8-98d5-a105443a582f"}]},{id:"7d976945-96fc-11e8-98d5-a105443a582f",name:"update_time",category:"field",ports:[{direction:"left",id:"7d9a0150-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7d9a0151-96fc-11e8-98d5-a105443a582f"}]},{id:"7d976946-96fc-11e8-98d5-a105443a582f",name:"delete_status",category:"field",ports:[{direction:"left",id:"7d9a4f70-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7d9a4f71-96fc-11e8-98d5-a105443a582f"}]},{id:"7d976947-96fc-11e8-98d5-a105443a582f",name:"sys_role_permission",category:"table",ports:[{direction:"left",id:"7d9a7680-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7d9a9d90-96fc-11e8-98d5-a105443a582f"}]}]},{id:"7fd3c4b0-96fc-11e8-98d5-a105443a582f",tableid:"f472f76fad5caecaf1b63e4f5cb02c0d",connName:"本地",databaseName:"example",name:"t_authority_info",position:[870,105],nodes:[{id:"7fd3c4b1-96fc-11e8-98d5-a105443a582f",name:"auth_key",category:"field",ports:[{direction:"left",id:"7fd460f0-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7fd460f1-96fc-11e8-98d5-a105443a582f"}]},{id:"7fd3c4b2-96fc-11e8-98d5-a105443a582f",name:"auth_name",category:"field",ports:[{direction:"left",id:"7fd4af10-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7fd4d620-96fc-11e8-98d5-a105443a582f"}]},{id:"7fd3c4b3-96fc-11e8-98d5-a105443a582f",name:"auth_parent",category:"field",ports:[{direction:"left",id:"7fd52440-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7fd52441-96fc-11e8-98d5-a105443a582f"}]},{id:"7fd3c4b4-96fc-11e8-98d5-a105443a582f",name:"auth_type",category:"field",ports:[{direction:"left",id:"7fd57260-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7fd57261-96fc-11e8-98d5-a105443a582f"}]},{id:"7fd3c4b5-96fc-11e8-98d5-a105443a582f",name:"auth_order",category:"field",ports:[{direction:"left",id:"7fd5e790-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7fd5e791-96fc-11e8-98d5-a105443a582f"}]},{id:"7fd3c4b6-96fc-11e8-98d5-a105443a582f",name:"auth_visible",category:"field",ports:[{direction:"left",id:"7fd635b0-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7fd635b1-96fc-11e8-98d5-a105443a582f"}]},{id:"7fd3c4b7-96fc-11e8-98d5-a105443a582f",name:"auth_path",category:"field",ports:[{direction:"left",id:"7fd683d0-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7fd6aae0-96fc-11e8-98d5-a105443a582f"}]},{id:"7fd3c4b8-96fc-11e8-98d5-a105443a582f",name:"auth_module",category:"field",ports:[{direction:"left",id:"7fd6f900-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7fd6f901-96fc-11e8-98d5-a105443a582f"}]},{id:"7fd3c4b9-96fc-11e8-98d5-a105443a582f",name:"t_authority_info",category:"table",ports:[{direction:"left",id:"7fd6f902-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7fd72010-96fc-11e8-98d5-a105443a582f"}]}]},{id:"e1",databaseName:"e1",name:"t",nodes:[{id:"node1",name:"auth_module",category:"field",ports:[{direction:"left",id:"pl1"},{direction:"right",id:"pr1"}]},{id:"node11",name:"t_authority_info",category:"table",ports:[{direction:"left",id:"pl11"},{direction:"right",id:"pr11"}]}]},{id:"e2",databaseName:"e2",name:"t",nodes:[{id:"node2",name:"auth_module",category:"field",ports:[{direction:"left",id:"7fd6f900-96fc-11e8-98d5-a105443a582f"},{direction:"right",id:"7fd6f901-96fc-11e8-98d5-a105443a582f"}]},{id:"node22",name:"t_authority_info",category:"table",ports:[{direction:"left",id:"pl2"},{direction:"right",id:"pr2"}]}]}]},"7pc7":function(t,e){},ArqF:function(t,e,n){"use strict";(function(t){var i=n("IHPB"),o=n.n(i),r=n("hRKE"),a=n.n(r),s=n("3cXf"),c=n.n(s),d=n("YzYj"),l=n("eu6k"),f=n("PWbV"),u=(n.n(f),n("UMG3")),p=(n.n(u),n("5fhs")),h=n.n(p),g=n("M9Vl"),v=n.n(g);e.a={name:"Test",data:function(){return{tableLinks:[]}},mounted:function(){var t=this;d.a.groupRenderRegister("blood",l.a);var e={groupRender:"table",zoom:!1,onlinkconnecting:function(t,e){var n="#258FFF";"blood"==e.tag&&(n="#FFFFFF");var i=t.select(".tflow-connection").attr({stroke:n});t.select(".tflow-connection-edge").attr({stroke:"#222237"}),t.select(".arrow").attr({stroke:n});var o=Snap.path.getPointAtLength(i.attr().d,0),r=o.x,a=o.y,s=t.select("circle");s&&s.attr({cx:r,cy:a,r:4})},onlinkconnected:function(t,e){var n="#258FFF";"blood"==e.tag&&(n="#FFFFFF");var i=t.select(".tflow-connection").attr({stroke:n}),o=Snap.path.getPointAtLength(i.attr().d,0),r=o.x,a=o.y;t.circle(r,a,4).attr({fill:n}),t.select(".tflow-connection-edge").attr({stroke:"#222237"}),t.select(".arrow").attr({stroke:n})},onclickField:function(e,n,i){if(!i){return{relativeLinks:[],unrelativeLinks:t.filterLinksFromTables()}}return t.filterLinksByNodeid(n)},connectionConfig:{radius:10}};this.tableLinks=this.filterLinksFromTables(),this.flow=d.a.init("#svg",h.a,this.tableLinks,e).layout({type:"default",hGap:300,vGap:160,vRandom:30}).render()},methods:{handleClick:function(){var t=this.flow.getGroupsData(),e=this.flow.getLinksData();console.log(c()(t),c()(e))},filterLinksByNodeid:function(e){var n=function t(e,n,i){var r;"object"!=(void 0===n?"undefined":a()(n))&&(n=[n]),i=i||[];var s=e.filter(function(t){return n.includes(t.target.nodeId)});if(s.length<1)return i;var c=s.map(function(t){return t.source.nodeId});return(r=i).push.apply(r,o()(s)),t(e,c,i)}(v.a,e),i=t.cloneDeep(this.tableLinks).filter(function(t){return n.every(function(e){return e.source.groupId!=t.source.groupId||e.target.groupId!=t.target.groupId})});[].concat(o()(n),o()(i));return{relativeLinks:n,unrelativeLinks:i}},filterLinksFromTables:function(){var t=h.a.reduce(function(t,e){return t.push.apply(t,o()(e.nodes)),t},[]).filter(function(t){return"table"==t.category}).map(function(t){return t.id});return v.a.filter(function(e){return t.includes(e.source.nodeId)||t.includes(e.target.nodeId)})}}}}).call(e,n("Y0Uy"))},I7Ko:function(t,e){},M9Vl:function(t,e){t.exports=[{id:"8157f3b0-96fc-11e8-98d5-a105443a582f",type:"link",source:{groupId:"7c331e50-96fc-11e8-98d5-a105443a582f",nodeId:"7c331e59-96fc-11e8-98d5-a105443a582f",portId:"7c376412-96fc-11e8-98d5-a105443a582f",port:"right"},target:{groupId:"7cd6ff70-96fc-11e8-98d5-a105443a582f",nodeId:"7cd6ff76-96fc-11e8-98d5-a105443a582f",portId:"7cd9be90-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.5},{id:"855dc480-96fc-11e8-98d5-a105443a582f",type:"link",source:{groupId:"7d976940-96fc-11e8-98d5-a105443a582f",nodeId:"7d976947-96fc-11e8-98d5-a105443a582f",portId:"7d9a9d90-96fc-11e8-98d5-a105443a582f",port:"right"},target:{groupId:"7cd6ff70-96fc-11e8-98d5-a105443a582f",nodeId:"7cd6ff76-96fc-11e8-98d5-a105443a582f",portId:"7cd9be90-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.5},{id:"954badd0-96fc-11e8-98d5-a105443a582f",type:"link",source:{groupId:"7c331e50-96fc-11e8-98d5-a105443a582f",nodeId:"7c331e51-96fc-11e8-98d5-a105443a582f",portId:"7c342fc0-96fc-11e8-98d5-a105443a582f",port:"right"},target:{groupId:"7cd6ff70-96fc-11e8-98d5-a105443a582f",nodeId:"7cd6ff71-96fc-11e8-98d5-a105443a582f",portId:"7cd7c2c0-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.6},{id:"98777250-96fc-11e8-98d5-a105443a582f",type:"link",source:{groupId:"7c331e50-96fc-11e8-98d5-a105443a582f",nodeId:"7c331e55-96fc-11e8-98d5-a105443a582f",portId:"7c362b90-96fc-11e8-98d5-a105443a582f",port:"right"},target:{groupId:"7cd6ff70-96fc-11e8-98d5-a105443a582f",nodeId:"7cd6ff74-96fc-11e8-98d5-a105443a582f",portId:"7cd94960-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.6},{id:"99e29b10-96fc-11e8-98d5-a105443a582f",type:"link",source:{groupId:"7d976940-96fc-11e8-98d5-a105443a582f",nodeId:"7d976942-96fc-11e8-98d5-a105443a582f",portId:"7d98c8d1-96fc-11e8-98d5-a105443a582f",port:"right"},target:{groupId:"7cd6ff70-96fc-11e8-98d5-a105443a582f",nodeId:"7cd6ff75-96fc-11e8-98d5-a105443a582f",portId:"7cd99780-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.6},{id:"9cf9c620-96fc-11e8-98d5-a105443a582f",type:"link",source:{groupId:"7cd6ff70-96fc-11e8-98d5-a105443a582f",nodeId:"7cd6ff76-96fc-11e8-98d5-a105443a582f",portId:"7cd9be91-96fc-11e8-98d5-a105443a582f",port:"right"},target:{groupId:"7fd3c4b0-96fc-11e8-98d5-a105443a582f",nodeId:"7fd3c4b9-96fc-11e8-98d5-a105443a582f",portId:"7fd6f902-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.5},{id:"9e330970-96fc-11e8-98d5-a105443a582f",type:"link",source:{groupId:"7cd6ff70-96fc-11e8-98d5-a105443a582f",nodeId:"7cd6ff71-96fc-11e8-98d5-a105443a582f",portId:"7cd7c2c1-96fc-11e8-98d5-a105443a582f",port:"right"},target:{groupId:"7fd3c4b0-96fc-11e8-98d5-a105443a582f",nodeId:"7fd3c4b3-96fc-11e8-98d5-a105443a582f",portId:"7fd52440-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.5},{id:"9f779760-96fc-11e8-98d5-a105443a582f",type:"link",source:{groupId:"7cd6ff70-96fc-11e8-98d5-a105443a582f",nodeId:"7cd6ff74-96fc-11e8-98d5-a105443a582f",portId:"7cd94961-96fc-11e8-98d5-a105443a582f",port:"right"},target:{groupId:"7fd3c4b0-96fc-11e8-98d5-a105443a582f",nodeId:"7fd3c4b5-96fc-11e8-98d5-a105443a582f",portId:"7fd5e790-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.5},{id:"a0f9f1a0-96fc-11e8-98d5-a105443a582f",type:"link",source:{groupId:"7cd6ff70-96fc-11e8-98d5-a105443a582f",nodeId:"7cd6ff73-96fc-11e8-98d5-a105443a582f",portId:"7cd8fb40-96fc-11e8-98d5-a105443a582f",port:"right"},target:{groupId:"7fd3c4b0-96fc-11e8-98d5-a105443a582f",nodeId:"7fd3c4b7-96fc-11e8-98d5-a105443a582f",portId:"7fd683d0-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.6},{type:"link",source:{groupId:"7d976940-96fc-11e8-98d5-a105443a582f",nodeId:"7d976947-96fc-11e8-98d5-a105443a582f",portId:"7d9a9d90-96fc-11e8-98d5-a105443a582f",port:"right"},target:{groupId:"7fd3c4b0-96fc-11e8-98d5-a105443a582f",nodeId:"7fd3c4b9-96fc-11e8-98d5-a105443a582f",portId:"7fd6f902-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.6},{type:"link",source:{groupId:"7d976940-96fc-11e8-98d5-a105443a582f",nodeId:"7d976946-96fc-11e8-98d5-a105443a582f",portId:"7d9a4f71-96fc-11e8-98d5-a105443a582f",port:"right"},target:{groupId:"7fd3c4b0-96fc-11e8-98d5-a105443a582f",nodeId:"7fd3c4b8-96fc-11e8-98d5-a105443a582f",portId:"7fd6f900-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.7},{type:"link",source:{groupId:"e1",nodeId:"node11",portId:"pr11",port:"right"},target:{groupId:"7fd3c4b0-96fc-11e8-98d5-a105443a582f",nodeId:"7fd3c4b9-96fc-11e8-98d5-a105443a582f",portId:"7fd6f902-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.7},{type:"link",source:{groupId:"e1",nodeId:"node1",portId:"pr1",port:"right"},target:{groupId:"7fd3c4b0-96fc-11e8-98d5-a105443a582f",nodeId:"7fd3c4b8-96fc-11e8-98d5-a105443a582f",portId:"7fd6f900-96fc-11e8-98d5-a105443a582f",port:"left"},turnRatio:.7}]},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("briU");var i=n("MVMM"),o=n("aozt"),r=n.n(o),a=function(t){return r.a.post("/database/gettables",t).then(function(t){return t.data})},s={name:"Tools",data:function(){return{dialogVisible:!1,form:{name:"本地",host:"localhost",port:"3306",user:"root",password:"root",dialect:"mysql"}}},methods:{handleConnect:function(){this.dialogVisible=!0},handleConfirm:function(){var t;(t=this.form,r.a.post("/database/createconnection",t).then(function(t){return t.data})).then(function(t){console.log(t)})}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"base-flex"},[n("el-button",{attrs:{round:"",size:"small"},on:{click:t.handleConnect}},[t._v("添加连接")]),t._v(" "),n("el-dialog",{attrs:{title:"连接",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"连接名称"}},[n("el-input",{attrs:{size:"small"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"主机ip或名称"}},[n("el-input",{attrs:{size:"small"},model:{value:t.form.host,callback:function(e){t.$set(t.form,"host",e)},expression:"form.host"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"端口"}},[n("el-input",{attrs:{size:"small"},model:{value:t.form.port,callback:function(e){t.$set(t.form,"port",e)},expression:"form.port"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{size:"small"},model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password",size:"small"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"数据库类型"}},[n("span",{attrs:{size:"small"}},[t._v(t._s(t.form.dialect))])])],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]},d={name:"App",components:{Tools:n("vSla")(s,c,!1,null,null,null).exports}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var f=n("vSla")(d,l,!1,function(t){n("I7Ko"),n("YOTG")},"data-v-397d757e",null).exports,u=n("zO6J"),p=n("3cXf"),h=n.n(p),g=n("IHPB"),v=n.n(g),m=n("YzYj"),b=n("eu6k"),y=(n("PWbV"),n("Kww8")),w=n.n(y);n("6fg8");var I=n("Z5r6"),M={name:"DataFlowIndex",data:function(){return{flow:null}},mounted:function(){m.a.groupRenderRegister("blood",b.a);var t={groupRender:"table",onlinkconnecting:function(t){var e=t.select(".tflow-connection").attr({stroke:"#258FFF"});t.select(".tflow-connection-edge").attr({stroke:"#222237"}),t.select(".arrow").attr({stroke:"#258FFF"});var n=Snap.path.getPointAtLength(e.attr().d,0),i=n.x,o=n.y,r=t.select("circle");r&&r.attr({cx:i,cy:o,r:4})},onlinkconnected:function(t){var e=t.select(".tflow-connection").attr({stroke:"#258FFF"}),n=Snap.path.getPointAtLength(e.attr().d,0),i=n.x,o=n.y;t.circle(i,o,4).attr({fill:"#258FFF"}),t.select(".tflow-connection-edge").attr({stroke:"#222237"}),t.select(".arrow").attr({stroke:"#258FFF"})}};this.flow=m.a.init("#svg",[],[],t)},methods:{handleDrop:function(t){var e=JSON.parse(t.dataTransfer.getData("Text")),n=[t.offsetX,t.offsetY],i=e.connName,o=e.databaseName,r=e.tableName,a=w()(""+i+o+r),s={id:I(),tableid:a,connName:i,databaseName:o,name:r,position:n,nodes:[].concat(v()(e.tableColumnInfo.map(function(t){return{id:I(),name:t.COLUMN_NAME,category:"field",ports:[{direction:"left"},{direction:"right"}]}})),[{id:I(),name:r,category:"table",ports:[{direction:"left"},{direction:"right"}]}])};this.flow.addGroup(s)},allowDrop:function(t){t.preventDefault()},getData:function(){var t=this.flow.getGroupsData(),e=this.flow.getLinksData();console.log(h()(t),h()(e))}}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{width:"100%",height:"100%"}},[e("svg",{staticClass:"svg unselectable",staticStyle:{border:"1px solid red",background:"#2D3039"},attrs:{id:"svg"},on:{drop:this.handleDrop,dragover:this.allowDrop}}),this._v(" "),e("button",{on:{click:this.getData}},[this._v("获取数据")])])},staticRenderFns:[]};var D=n("vSla")(M,x,!1,function(t){n("UkrU"),n("7pc7")},"data-v-3c5f6af2",null).exports,k=n("lC5x"),N=n.n(k),C=n("zsLt"),S=n.n(C),A=n("J0Oq"),z=n.n(A),E=n("4YfN"),T=n.n(E),Z=n("9rMa"),L={name:"LeftSide",data:function(){return{treeData:[]}},computed:T()({},Object(Z.b)({connections:function(t){return t.database.connections}})),watch:{connections:function(){this.treeData=this.connections.map(function(t){return{title:t.name,async:!0,type:"conn"}})}},mounted:function(){},methods:{init:function(){this.treeData=this.connections.map(function(t){return{title:t.name,async:!0}})},tpl:function(t,e){var n=this,i=this.$createElement;return"table"!=t.type?i("span",{style:"font-size:12px"},[t.title]):i("span",{attrs:{draggable:"true"},style:"font-size:12px",on:{dragstart:function(e){return n.transferData(e,t)}}},[t.title])},transferData:function(t,e){var n={tableColumnInfo:e.tableColumnInfo,tableName:e.title,databaseName:e.parent.title,connName:e.parent.parent.title};t.dataTransfer.setData("Text",h()(n))},load:function(t){var e=this;return z()(N.a.mark(function n(){var i;return N.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.$set(t,"loading",!0),i=[],"conn"!=t.type){n.next=7;break}return n.next=5,o={connName:t.title},r.a.post("/database/getdatabases",o).then(function(t){return t.data});case 5:(i=n.sent).forEach(function(n){t.hasOwnProperty("children")||e.$set(t,"children",[]),t.children.push({title:n.Database,type:"database",async:!0})});case 7:if("database"!=t.type){n.next=13;break}return n.next=10,a({connName:t.parent.title,dbName:t.title});case 10:i=n.sent,new S.a(i.map(function(t){return t.table_name})).forEach(function(n){t.hasOwnProperty("children")||e.$set(t,"children",[]);var o=i.filter(function(t){return t.table_name==n});t.children.push({title:n,type:"table",tableColumnInfo:o})});case 13:e.$set(t,"loading",!1);case 14:case"end":return n.stop()}var o},n,e)}))()}}},P={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrapper"},[e("v-tree",{ref:"tree1",attrs:{canDeleteRoot:!1,data:this.treeData,tpl:this.tpl,halfcheck:!0},on:{"async-load-nodes":this.load}})],1)},staticRenderFns:[]};var O={name:"DataFlow",components:{DataFlowComponent:D,LeftSide:n("vSla")(L,P,!1,function(t){n("WlZy")},"data-v-449b52a4",null).exports},mounted:function(){var t,e=this;r.a.post("/database/getconnection",t).then(function(t){return t.data}).then(function(t){e.$store.commit("putConnections",t)})}},B={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"base-flex"},[e("div",{staticClass:"left-side"},[e("left-side")],1),this._v(" "),e("div",{staticClass:"main"},[e("data-flow-component")],1)])},staticRenderFns:[]};n("vSla")(O,B,!1,function(t){n("O1lC")},"data-v-f4dcafce",null).exports;var _=n("ArqF"),R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("svg",{staticStyle:{border:"1px solid red",background:"#2D3039"},attrs:{width:"100%",height:"800",id:"svg"}})])},staticRenderFns:[]};var F=function(t){n("vB7J")},G=n("vSla")(_.a,R,!1,F,null,null).exports;i.default.use(u.a);var j=new u.a({routes:[{path:"/",name:"DataFlowPage",component:G},{path:"/test",name:"test",component:G}]}),V={putConnections:function(t,e){t.connections=e}},U={actions:{},getters:{},state:{connections:[]},mutations:V};i.default.use(Z.a);var Y=new Z.a.Store({modules:{database:U}}),Q=n("o+a0"),W=n.n(Q),H=(n("Y8I5"),n("rVsN")),X=n.n(H);r.a.defaults.baseURL=Object({NODE_ENV:"production"}).API_ROOT,r.a.defaults.timeout=6e4,r.a.defaults.headers["Content-Type"]="application/json";var q=r.a.CancelToken.source();r.a.interceptors.response.use(function(t){return!1===t.data.success&&alert(t.data.error),1001==t.data.code&&(j.push("/login"),q.cancel("Operation canceled by the user.")),t},function(t){if(t.response)switch(t.response.status){case 400:t.response&&t.response.data&&t.response.data.message}return X.a.reject(t)});r.a,n("VXTH");var K=n("AAvA"),$=n.n(K);i.default.use(W.a),i.default.use($.a),i.default.config.productionTip=!1,new i.default({el:"#app",router:j,store:Y,components:{App:f},template:"<App/>"})},O1lC:function(t,e){},OhAX:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(t,e){var n=t.groupId,i=t.nodeId,o=t.port,r=t.portId,a=e.transform().globalMatrix;if(!(n&&i&&r&&o))return!1;var s=e.select("g[g-id='"+n+"'][f-type='group']").select("[n-port='"+o+"'][p-id='"+r+"'][f-type='port']"),c=s.transform().globalMatrix,d=c.a,l=(c.e-a.e)/d,f=(c.f-a.f)/d;return[l+parseFloat(s.node.getAttribute("cx")),f+parseFloat(s.node.getAttribute("cy"))]}},PWbV:function(t,e){},S25z:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTAgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUwLjIgKDU1MDQ3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Db21iaW5lZCBTaGFwZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSIyX+i1hOS6p+euoeeQhi3ngbDoibIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLmlbDmja7msrvnkIZf5pWw5o2u6KGA57yYIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTY2LjAwMDAwMCwgLTM5Ny4wMDAwMDApIiBmaWxsPSIjZmZmIj4KICAgICAgICAgICAgPHBhdGggZD0iTTk3NCwzOTcgQzk3NS4xMDQ1NjksMzk3IDk3NiwzOTcuODk1NDMxIDk3NiwzOTkgQzk3Niw0MDAuMTA0NTY5IDk3NS4xMDQ1NjksNDAxIDk3NCw0MDEgQzk3Mi44OTU0MzEsNDAxIDk3Miw0MDAuMTA0NTY5IDk3MiwzOTkgQzk3MiwzOTcuODk1NDMxIDk3Mi44OTU0MzEsMzk3IDk3NCwzOTcgWiBNOTY4LDQwMSBDOTY5LjEwNDU2OSw0MDEgOTcwLDQwMS44OTU0MzEgOTcwLDQwMyBDOTcwLDQwNC4xMDQ1NjkgOTY5LjEwNDU2OSw0MDUgOTY4LDQwNSBDOTY2Ljg5NTQzMSw0MDUgOTY2LDQwNC4xMDQ1NjkgOTY2LDQwMyBDOTY2LDQwMS44OTU0MzEgOTY2Ljg5NTQzMSw0MDEgOTY4LDQwMSBaIE05NzQsNDA1IEM5NzUuMTA0NTY5LDQwNSA5NzYsNDA1Ljg5NTQzMSA5NzYsNDA3IEM5NzYsNDA4LjEwNDU2OSA5NzUuMTA0NTY5LDQwOSA5NzQsNDA5IEM5NzIuODk1NDMxLDQwOSA5NzIsNDA4LjEwNDU2OSA5NzIsNDA3IEM5NzIsNDA1Ljg5NTQzMSA5NzIuODk1NDMxLDQwNSA5NzQsNDA1IFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},UMG3:function(t,e){},UkrU:function(t,e){},VXTH:function(t,e){},WlZy:function(t,e){},Y8I5:function(t,e){},YOTG:function(t,e){},YzYj:function(t,e,n){"use strict";var i=n("A9zj"),o=n.n(i),r=n("zfUT"),a=n("OhAX"),s=n("uski"),c=n("ZLEe"),d=n.n(c),l=n("HzJ8"),f=n.n(l);function u(t,e,n,i){i[e]=t;var o=n.filter(function(t){return t.source.groupId==e}).map(function(t){return t.target.groupId}),r=!0,a=!1,s=void 0;try{for(var c,d=f()(o);!(r=(c=d.next()).done);r=!0){var l=c.value;void 0===i[l]?u(t+1,l,n,i):i[e]=Math.min(i[e],i[l]-1)}}catch(t){a=!0,s=t}finally{try{!r&&d.return&&d.return()}finally{if(a)throw s}}return i}var p=function(t,e,n){var i=t.vGap,o=t.hGap,r=t.vRandom,a=r?function(){return Math.round(Math.random()*r)}:function(){return 0},s={},c=!0,l=!1,p=void 0;try{for(var h,g=f()(e);!(c=(h=g.next()).done);c=!0){var v=h.value,m=0;s[v.id]||u(m,v.id,n,s)}}catch(t){l=!0,p=t}finally{try{!c&&g.return&&g.return()}finally{if(l)throw p}}var b=0,y=0,w={},I=0,M=!0,x=!1,D=void 0;try{for(var k,N=f()(d()(s));!(M=(k=N.next()).done);M=!0)m=k.value,b=Math.max(s[m],b),y=Math.min(s[m],y),w[s[m]]?w[s[m]].push(m):w[s[m]]=[m],I=Math.max(I,w[s[m]].length)}catch(t){x=!0,D=t}finally{try{!M&&N.return&&N.return()}finally{if(x)throw D}}var C=I*i,S=function(t){var n=w[t].length,r=(C-n*i)/2;w[t].forEach(function(n,s){var c=(t-y)*o,d=s*i+r+a();e.find(function(t){return t.id==n}).position=[c,d]})},A=!0,z=!1,E=void 0;try{for(var T,Z=f()(d()(w));!(A=(T=Z.next()).done);A=!0)S(T.value)}catch(t){z=!0,E=t}finally{try{!A&&Z.return&&Z.return()}finally{if(z)throw E}}},h={init:function(t,e,n,i){return this.svgDom=t,this.groups=e,this.links=n,this.config=i,this},render:function(){return new r.a(this.svgDom,this.groups,this.links,this.config)},layout:function(t){var e=t.type,n=o()(t,["type"]);return"default"!=e&&e||p(n,this.groups,this.links),this}};h.getPortPosition=a.a,h.groupRenderRegister=s.b,window&&(window.tflow=h);e.a=h},eu6k:function(t,e,n){"use strict";var i=n("zsLt"),o=n.n(i),r=n("IHPB"),a=n.n(r),s=n("KH7x"),c=n.n(s),d=36,l=30,f=200,u=6,p=d+10,h=d+30,g=(f-160)/2,v=6,m=d+15,b=f-30,y=[[1,4],[5,0],[9,4]],w=100,I="#258FFF",M=0,x=n("S25z"),D=n("l2jM"),k="collapse",N=null,C=null,S=null,A=20,z=h+10,E=void 0;function T(t){return"M0 "+d+"V"+(t-u)+" A"+u+" "+u+" 0 0,0 "+u+" "+t+" H"+(f-u)+" \n    A"+u+" "+u+" 0 0,0 "+f+" "+(t-u)+" V"+d+"\n    Z"}function Z(t,e){var n=t.selectAll("[f-type='node'][category='field'][chosen='dark']");n.attr({status:"collapse"}),n.animate({transform:"translate(0,0)",opacity:-1},w,function(){n.forEach(function(t){return t.addClass("blood-hide")})});var i=t.selectAll("[f-type='node'][category='field'][chosen='highlight']");i.attr({status:"collapse"}),i.forEach(function(t,e){t.animate({transform:"translate(0,"+(l+v)*e+")",opacity:1},w,function(){i.forEach(function(t){return t.removeClass("blood-hide")})})}),t.select("[f-type='node'][category='table']").select("[n-port='left']").animate({cx:0,cy:e/2},w),t.select("[f-type='node'][category='table']").select("[n-port='right']").animate({cx:f,cy:e/2},w)}function L(t,e,n,i,o){if(N&&C&&S)if(t){C.node.innerHTML=i;var r=C.node.clientWidth+10;N.attr({x:-6,y:-14,height:A,width:r}),o.after(S),S.attr({transform:"translate("+e+","+(parseFloat(n)+14)+")"}),S.animate({opacity:1},200)}else S.animate({opacity:0},200)}e.a={renderGroup:function(t,e,n,i){var o=(e.nodes||[]).filter(function(t){return"field"==t.category}).length*(l+v)+h+10;E="collapse"==k?z:o;var r="M0 "+d+"V"+u+" A"+u+" "+u+" 0 0,1 "+u+" 0 H"+(f-u)+"\n            A"+u+" "+u+" 0 0,1 "+f+" "+u+" V"+d+"\n            Z",s=t.path(r).attr({fill:"#373B47"}),g=t.el("foreignObject",{x:26,y:10,height:20,width:160}).addClass("blood-pointer").mouseover(function(){L(!0,this.attr("x"),this.attr("y"),e.databaseName,this)}).mouseout(function(){L(!1)});g.node.innerHTML='<p class="blood-title">'+e.databaseName+"</p>";var I=t.el("foreignObject",{x:30,y:p,height:20,width:140}).addClass("blood-pointer").mouseover(function(){L(!0,this.attr("x"),this.attr("y"),e.name,this)}).mouseout(function(){L(!1)});I.node.innerHTML='<p class="blood-title">'+e.name+"</p>";var M,x,D=(M=m,x=b,y.map(function(t){return[t[0]+x,t[1]+M]})),N=t.polyline(D.reduce(function(t,e){return t.push.apply(t,a()(e)),t},[])).attr({stroke:"#67677E",strokeWidth:2,fill:"none"}),C=t.rect.apply(t,a()(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.reduce(function(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[0],e[0]),Math.max(t[1],e[1])]}),i=c()(n,4),o=i[0],r=i[1];return[o-e,r-e,i[2]-o+e,i[3]-r+e]}(D,10))).attr({opacity:0}),S=t.group(N,C).addClass("blood-pointer").click(function(){var t,e=B.selectAll("[chosen='highlight']").length*l+h+10,n=T(e);"expand"==B.attr().status?(Z(B,e),O.animate({d:n},w,function(){i.lineFollowing(B)})):(function(t,e){var n=t.selectAll("[f-type='node'][category='field']");n.attr({status:"expand"}),n.forEach(function(t){return t.removeClass("blood-hide")}),n.forEach(function(t,e){t.animate({transform:"translate(0,"+(l+v)*e+")",opacity:1},w)}),t.select("[f-type='node'][category='table']").select("[n-port='left']").animate({cx:0,cy:e/2},w),t.select("[f-type='node'][category='table']").select("[n-port='right']").animate({cx:f,cy:e/2},w)}(B,o),O.animate({d:A},w,function(){i.lineFollowing(B)})),"expand"==(t=B).attr().status?t.attr({status:"collapse"}):t.attr({status:"expand"})}).mousedown(function(t){t.stopPropagation()}),A=T(o),P=T(E),O=t.path(P).attr({fill:"#13132B",opacity:.5,part:"mainframe"}),B=t.group(s,O,g,I,S).attr({status:k}).addClass("hover-move");return B},renderNode:function(t,e,n,i){if("table"==e.category)return function(t,e){return t.g().attr({category:"table",opacity:-1}).animate({opacity:1},w)}(t);var r=t.rect(g,h,160,l).attr({fill:"#373B47"}),s=t.el("foreignObject",{x:40,y:h+6,height:20,width:100}).addClass("blood-pointer").mouseover(function(){L(!0,this.attr("x"),this.attr("y"),e.name,this)}).mouseout(function(){L(!1)});s.node.innerHTML='<p class="blood-title">'+e.name+"</p>";var c=t.image(x,160,h+12,10,10).attr({active:0}).addClass("blood-pointer").click(function(){var t=this.attr("active"),n=[];if(i.el.selectAll("[f-type='group'][status='collapse']").forEach(function(t){t.selectAll("[chosen='highlight']").length>0&&n.push(t)}),i.el.selectAll("[f-type='node'][category='field']").forEach(function(t){t.select("image").attr({href:x,active:0}),t.select("rect").attr({fill:"#373B47"}),t.attr({chosen:"dark"})}),"0"==t?(this.attr({active:1}),this.attr({href:D,active:1}),r.attr({fill:"#59B3FF"}),p.attr({chosen:"highlight"})):(this.attr({active:0,href:x}),r.attr({fill:"#373B47"})),i.config.onclickField){var s=i.config.onclickField(p,e.id,parseInt(this.attr("active")));if(!s)return;var c=s.relativeLinks,d=s.unrelativeLinks;c.forEach(function(t){t.tag="blood"});var f=[].concat(a()(c),a()(d));i.reRenderLinks(f);var u=c.reduce(function(t,e){return t.push(e.source.nodeId,e.target.nodeId),t},[]),g=new o.a;u.forEach(function(t){var e=i.el.select("[f-type='node'][n-id='"+t+"']").attr({chosen:"highlight"});e.select("rect").attr({fill:"#59B3FF"});var n=e.attr("g-id");g.add(n)}),n.forEach(function(t){var e=h+10;Z(t,e),t.select("[part='mainframe']").animate({d:T(e)},w,function(){i.lineFollowing(t)})}),g.forEach(function(t){var e=i.el.select("[f-type='group'][g-id='"+t+"']");if("expand"!=e.attr("status")){var n=e.selectAll("[chosen='highlight']").length*l+h+10;Z(e,n),e.select("[part='mainframe']").animate({d:T(n)},w,function(){i.lineFollowing(e)})}})}}).mousedown(function(t){t.stopPropagation()}),d="collapse"==k?0:(l+v)*n,f="collapse"==k?-1:1,u="collapse"==k?"blood-hide":"",p=t.g(r,s,c).attr({transform:"translate(0,"+d+")",opacity:f,status:"expand",category:"field",chosen:"dark"}).addClass(u);return p},renderPort:function(t,e,n,i,o){if("table"==i.category)return function(t,e,n,i,o){var r=t.circle(0,0,0);return"left"==e.direction&&(r=t.circle(0,E/2,M).attr({fill:I})),"right"==e.direction&&(r=t.circle(f,E/2,M).attr({fill:I})),r}(t,e);var r=t.circle(0,0,0);return"left"==e.direction&&(r=t.circle(g,h+l/2,M).attr({fill:I})),"right"==e.direction&&(r=t.circle(g+160,h+l/2,M).attr({fill:I})),r},init:function(t){N=t.el.rect(0,0,A,10,2,2).attr({fill:"#216AB5",stroke:"#fff",strokeWidth:1}),C=t.el.text(0,0,"text").attr({fill:"#fff",style:"font-size:12px"}),S=t.el.g(N,C).attr({opacity:0}).addClass("blood-events");var e=t.config;e&&e.groupConfig&&(k=e.groupConfig.statusDefault||k)}}},f1rb:function(t,e,n){"use strict";var i=n("KH7x"),o=n.n(i),r=n("IHPB"),a=n.n(r),s=n("HzJ8"),c=n.n(s),d=n("cUn4"),l=n.n(d),f=function(t,e){return[t[0]+e[0],t[1]+e[1]]},u=function(t,e){return[t[0]*e,t[1]*e]},p=function(t,e){return[e[0]-t[0],e[1]-t[1]]},h=function(t,e){return t[0]*e[1]-t[1]*e[0]==0},g=function(t,e){return t[0]*e[0]+t[1]*e[1]},v=function(t,e){return t[0]*e[1]-t[1]*e[0]},m=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]},b=[[0,5],[12,10],[8,5],[12,0]],y=[6,5];function w(t,e,n){e=e/180*Math.PI;var i=n[0],o=n[1],r=t[0]-i,a=t[1]-o,s=r*Math.cos(e)-a*Math.sin(e),c=r*Math.sin(e)+a*Math.cos(e);return[Math.floor(100*s)/100,Math.floor(100*c)/100]}function I(t){var e="";return t.forEach(function(t,n){e+=0==n?"M":"L",e+=t[0]+"  "+t[1]}),e+="Z"}var M=I(b.map(function(t){return w(t,180,y)})),x=I(b.map(function(t){return w(t,0,y)})),D=I(b.map(function(t){return w(t,90,y)})),k=I(b.map(function(t){return w(t,-90,y)})),N=n("OhAX");function C(t,e){return t.find(function(t){return t!=e})}function S(t){return(0!=t[0]||0!=t[1])&&(0==t[0]?[0,t[1]/Math.abs(t[1])]:0==t[1]?[t[0]/Math.abs(t[0]),0]:m(t))}var A=function(t){var e=t.entryPoint,n=void 0===e?[0,0]:e,i=t.entryDirection,o=void 0===i?[0,1]:i,r=t.entryExt,a=void 0===r?10:r,s=t.exitPoint,c=void 0===s?[10,10]:s,d=t.exitDirection,l=void 0===d?[1,0]:d,v=t.exitExt,m=void 0===v?10:v,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(null===l||"0,0"==l.join()){var y=p(c,n);l=Math.abs(y[0])>Math.abs(y[1])?[y[0]/Math.abs(y[0]),0]:[0,y[1]/Math.abs(y[1])]}var w=f(n,u(o,a)),I=f(c,u(l,m));l=u(l,-1);var M=[[I[0]-w[0],0],[0,I[1]-w[1]]],x=void 0,D=M.find(function(t){return h(t,o)});x=g(D,o)>0?D:C(M,D);var k=void 0,N=M.find(function(t){return h(t,l)});k=g(N,l)>0?N:C(M,N);var A=g(x,k)>0?2:1,z=C(M,k),E=[];if(E.push({position:n,direction:null},{position:w,direction:o}),1==A){var T=f(w,x),Z=S(x),L=f(T,k),P=S(k);E.push({position:T,direction:Z},{position:L,direction:P})}else{var O=f(w,u(x,b)),B=S(x),_=f(O,z),R=S(z),F=f(_,u(k,1-b)),G=S(k);E.push({position:O,direction:B},{position:_,direction:R,type:"pathMiddleP"},{position:F,direction:G})}return E.push({position:c,direction:l}),E.filter(function(t){return!1!==t.direction})},z=[{name:"right",direction:[1,0],arrow:M,delta:[0,0]},{name:"left",direction:[-1,0],arrow:x,delta:[12,0]},{name:"up",direction:[0,-1],arrow:D,delta:[10,5]},{name:"down",direction:[0,1],arrow:k,delta:[10,-5]}],E=20,T=5,Z=new l.a,L=function(t,e){var n=.5,i=void 0,o=t.find(function(t){return"pathMiddleP"==t.type});if(o){Z.has(e)&&Z.delete(e),i=[t[2].position,o.position];var r=!0,a=!1,s=void 0;try{for(var d,l=c()(Z.values());!(r=(d=l.next()).done);r=!0){var f=d.value;P(f.middlePoints,i)&&(n=Math.max(n,f.ratio>=.8?.1:f.ratio+.1))}}catch(t){a=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(a)throw s}}Z.set(e,{ratio:n,middlePoints:i})}return n},P=function(t,e){var n=p.apply(void 0,a()(t)),i=p.apply(void 0,a()(e));if(!h(n,i))return!1;if(t[0][0]!=e[0][0]&&t[0][1]!=e[0][1])return!1;var o=t[0][0]==t[1][0]?1:0,r=function(t,e){return function(n){return n>Math.min(t,e)&&n<Math.max(t,e)}},s=r(t[0][o],t[1][o]),c=r(e[0][o],e[1][o]);return!![t[0][o],t[1][o]].reduce(function(t,e){return c(e)||t},!1)||!![e[0][o],e[1][o]].reduce(function(t,e){return s(e)||t},!1)};function O(t){return t.position}var B={drawLine:function(t,e){var n={entryPoint:Object(N.a)(e.source,t)||O(e.source),entryDirection:e.source.port?z.find(function(t){return t.name==e.source.port}).direction:[0,0],entryExt:E,exitPoint:Object(N.a)(e.target,t)||O(e.target),exitDirection:e.target.port?z.find(function(t){return t.name==e.target.port}).direction:[0,0],exitExt:E},i=void 0;if(e.turnRatio&&e.target.groupId&&"link"==e.type){var r=e.turnRatio;i=A(n,r)}else if("guide"==e.type)i=A(n);else{i=A(n);var a=L(i,e.id);i=.5!=a?A(n,a):i,e.target.groupId&&(e.turnRatio=a)}var s=function(t,e){if(!(t.length<1))return t.reduce(function(t,n){var i=f(n.position,u(n.direction,-1*e)),r=o()(i,2),a=r[0],s=r[1];if(!t.d){var c=t.position;return n.d="M"+c[0]+" "+c[1]+" L "+a+" "+s,n}var d=t.d,l=1==g(t.direction,n.direction);if(l)return d+="L "+a+" "+s,n.d=d,n;var p=t.position,h=f(p,u(n.direction,e)),m=o()(h,2),b=m[0],y=m[1],w=v(t.direction,n.direction)>0?1:0;return d+="A"+e+" "+e+" 0 0,"+w+" "+b+" "+y+" L "+a+" "+s,n.d=d,n}).d}(i,T),c=i[i.length-1].direction,d=z.find(function(t){return t.direction.join()==c.join()}),l=d.delta,p=void 0;if(p=t.select("[l-id='"+e.id+"']")){p.select(".tflow-connection-edge").attr({d:s}),p.select(".tflow-connection").attr({d:s});var h=o()(n.exitPoint,2),m=h[0],b=h[1];p.select(".arrow").attr({d:d.arrow,transform:"translate("+(m-10+l[0])+","+(b+l[1])+")",stroke:"#61B7CF",fill:"#61B7CF","n-id":e.id})}else{var y=t.path(s).attr({stroke:"#fff",fill:"none",pointerEvents:"visiblestroke"}).addClass("tflow-connection-edge");y.mouseover(function(){this.parent().addClass("tflow-connection-hover")}).mouseout(function(){this.parent().removeClass("tflow-connection-hover")});var w=t.path(s).attr({stroke:"#61B7CF",fill:"none",pointerEvents:"none"}).addClass("tflow-connection"),I=o()(n.exitPoint,2),M=I[0],x=I[1],D=t.path(d.arrow||"").attr({transform:"translate("+(M-10+l[0])+","+(x+l[1])+")",stroke:"#61B7CF",fill:"#61B7CF","n-id":e.id}).addClass("arrow");p=t.group(y,w,D).attr({"l-id":e.id})}return p},init:function(t){var e=t.config;e&&e.connectionConfig&&(T=e.connectionConfig.radius||T,E=e.connectionConfig.extension||E)}},_={straight:B,default:B};e.a=_},l2jM:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTAgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUwLjIgKDU1MDQ3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Db21iaW5lZCBTaGFwZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSIyX+i1hOS6p+euoeeQhi3ngbDoibIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLmlbDmja7msrvnkIZf5pWw5o2u6KGA57yYIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTQ4LjAwMDAwMCwgLTM5Ny4wMDAwMDApIiBmaWxsPSIjZmZmIj4KICAgICAgICAgICAgPHBhdGggZD0iTTk1MS40MTQyMTQsNDA0LjQxNDIxNCBDOTUxLjA1MjI4NSw0MDQuNzc2MTQyIDk1MC41NTIyODUsNDA1IDk1MCw0MDUgQzk0OC44OTU0MzEsNDA1IDk0OCw0MDQuMTA0NTY5IDk0OCw0MDMgQzk0OCw0MDEuODk1NDMxIDk0OC44OTU0MzEsNDAxIDk1MCw0MDEgQzk1MC41NTIyODUsNDAxIDk1MS4wNTIyODUsNDAxLjIyMzg1OCA5NTEuNDE0MjE0LDQwMS41ODU3ODYgTDk1NCwzOTkgQzk1NCwzOTcuODk1NDMxIDk1NC44OTU0MzEsMzk3IDk1NiwzOTcgQzk1Ny4xMDQ1NjksMzk3IDk1OCwzOTcuODk1NDMxIDk1OCwzOTkgQzk1OCw0MDAuMTA0NTY5IDk1Ny4xMDQ1NjksNDAxIDk1Niw0MDEgQzk1NS40NDc3MTUsNDAxIDk1NC45NDc3MTUsNDAwLjc3NjE0MiA5NTQuNTg1Nzg2LDQwMC40MTQyMTQgTDk1Miw0MDMgTDk1NC41ODU3ODYsNDA1LjU4NTc4NiBDOTU0Ljk0NzcxNSw0MDUuMjIzODU4IDk1NS40NDc3MTUsNDA1IDk1Niw0MDUgQzk1Ny4xMDQ1NjksNDA1IDk1OCw0MDUuODk1NDMxIDk1OCw0MDcgQzk1OCw0MDguMTA0NTY5IDk1Ny4xMDQ1NjksNDA5IDk1Niw0MDkgQzk1NC44OTU0MzEsNDA5IDk1NCw0MDguMTA0NTY5IDk1NCw0MDcgTDk1MS40MTQyMTQsNDA0LjQxNDIxNCBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},rcH3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n("hRKE"),r=n.n(o);!function t(e,n,o){function r(s,c){if(!n[s]){if(!e[s]){if(!c&&("function"==typeof i&&i))return i(s,!0);if(a)return a(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n||t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var a="function"==typeof i&&i,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,i){var o=t("./svg-pan-zoom.js");!function(t,i){"function"==typeof define&&n("Ycmu")?define("svg-pan-zoom",function(){return o}):void 0!==e&&e.exports&&(e.exports=o,t.svgPanZoom=o)}(window,document)},{"./svg-pan-zoom.js":4}],2:[function(t,e,n){var i=t("./svg-utilities");e.exports={enable:function(t){var e=t.svg.querySelector("defs");if(e||(e=document.createElementNS(i.svgNS,"defs"),t.svg.appendChild(e)),!e.querySelector("style#svg-pan-zoom-controls-styles")){var n=document.createElementNS(i.svgNS,"style");n.setAttribute("id","svg-pan-zoom-controls-styles"),n.setAttribute("type","text/css"),n.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",e.appendChild(n)}var o=document.createElementNS(i.svgNS,"g");o.setAttribute("id","svg-pan-zoom-controls"),o.setAttribute("transform","translate("+(t.width-70)+" "+(t.height-76)+") scale(0.75)"),o.setAttribute("class","svg-pan-zoom-control"),o.appendChild(this._createZoomIn(t)),o.appendChild(this._createZoomReset(t)),o.appendChild(this._createZoomOut(t)),t.svg.appendChild(o),t.controlIcons=o},_createZoomIn:function(t){var e=document.createElementNS(i.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-in"),e.setAttribute("transform","translate(30.5 5) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomIn()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(i.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var o=document.createElementNS(i.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(o),e},_createZoomReset:function(t){var e=document.createElementNS(i.svgNS,"g");e.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),e.setAttribute("transform","translate(5 35) scale(0.4)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().reset()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().reset()},!1);var n=document.createElementNS(i.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var o=document.createElementNS(i.svgNS,"path");o.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),o.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(o);var r=document.createElementNS(i.svgNS,"path");return r.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),r.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(r),e},_createZoomOut:function(t){var e=document.createElementNS(i.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-out"),e.setAttribute("transform","translate(30.5 70) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomOut()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(i.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var o=document.createElementNS(i.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(o),e},disable:function(t){t.controlIcons&&(t.controlIcons.parentNode.removeChild(t.controlIcons),t.controlIcons=null)}}},{"./svg-utilities":5}],3:[function(t,e,n){var i=t("./svg-utilities"),o=t("./utilities"),r=function(t,e){this.init(t,e)};r.prototype.init=function(t,e){this.viewport=t,this.options=e,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=o.proxy(this.updateCTM,this),this.requestAnimationFrame=o.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},r.prototype.cacheViewBox=function(){var t=this.options.svg.getAttribute("viewBox");if(t){var e=t.split(/[\s\,]/).filter(function(t){return t}).map(parseFloat);this.viewBox.x=e[0],this.viewBox.y=e[1],this.viewBox.width=e[2],this.viewBox.height=e[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},r.prototype.simpleViewBoxCache=function(){var t=this.viewport.getBBox();this.viewBox.x=t.x,this.viewBox.y=t.y,this.viewBox.width=t.width,this.viewBox.height=t.height},r.prototype.getViewBox=function(){return o.extend({},this.viewBox)},r.prototype.processCTM=function(){var t,e=this.getCTM();(this.options.fit||this.options.contain)&&(t=this.options.fit?Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t);if(this.options.center){var n=.5*(this.options.width-(this.viewBox.width+2*this.viewBox.x)*e.a),i=.5*(this.options.height-(this.viewBox.height+2*this.viewBox.y)*e.a);e.e=n,e.f=i}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e},r.prototype.getOriginalState=function(){return o.extend({},this.originalState)},r.prototype.getState=function(){return o.extend({},this.activeState)},r.prototype.getZoom=function(){return this.activeState.zoom},r.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},r.prototype.computeRelativeZoom=function(t){return t/this.originalState.zoom},r.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},r.prototype.getCTM=function(){var t=this.options.svg.createSVGMatrix();return t.a=this.activeState.zoom,t.b=0,t.c=0,t.d=this.activeState.zoom,t.e=this.activeState.x,t.f=this.activeState.y,t},r.prototype.setCTM=function(t){var e=this.isZoomDifferent(t),n=this.isPanDifferent(t);if(e||n){if(e&&(!1===this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(t.a))?(t.a=t.d=this.activeState.zoom,e=!1):(this.updateCache(t),this.options.onZoom(this.getRelativeZoom()))),n){var i=this.options.beforePan(this.getPan(),{x:t.e,y:t.f}),r=!1,a=!1;!1===i?(t.e=this.getPan().x,t.f=this.getPan().y,r=a=!0):o.isObject(i)&&(!1===i.x?(t.e=this.getPan().x,r=!0):o.isNumber(i.x)&&(t.e=i.x),!1===i.y?(t.f=this.getPan().y,a=!0):o.isNumber(i.y)&&(t.f=i.y)),r&&a||!this.isPanDifferent(t)?n=!1:(this.updateCache(t),this.options.onPan(this.getPan()))}(e||n)&&this.updateCTMOnNextFrame()}},r.prototype.isZoomDifferent=function(t){return this.activeState.zoom!==t.a},r.prototype.isPanDifferent=function(t){return this.activeState.x!==t.e||this.activeState.y!==t.f},r.prototype.updateCache=function(t){this.activeState.zoom=t.a,this.activeState.x=t.e,this.activeState.y=t.f},r.prototype.pendingUpdate=!1,r.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},r.prototype.updateCTM=function(){var t=this.getCTM();i.setCTM(this.viewport,t,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(t)},e.exports=function(t,e){return new r(t,e)}},{"./svg-utilities":5,"./utilities":7}],4:[function(t,e,n){var i=t("./uniwheel"),o=t("./control-icons"),r=t("./utilities"),a=t("./svg-utilities"),s=t("./shadow-viewport"),c=function(t,e){this.init(t,e)},d={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null};c.prototype.init=function(t,e){var n=this;this.svg=t,this.defs=t.querySelector("defs"),a.setupSvgAttributes(this.svg),this.options=r.extend(r.extend({},d),e),this.state="none";var i=a.getBoundingClientRectNormalized(t);this.width=i.width,this.height=i.height,this.viewport=s(a.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(t,e){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(t,e)},onZoom:function(t){if(n.viewport&&n.options.onZoom)return n.options.onZoom(t)},beforePan:function(t,e){if(n.viewport&&n.options.beforePan)return n.options.beforePan(t,e)},onPan:function(t){if(n.viewport&&n.options.onPan)return n.options.onPan(t)},onUpdatedCTM:function(t){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(t)}});var c=this.getPublicInstance();c.setBeforeZoom(this.options.beforeZoom),c.setOnZoom(this.options.onZoom),c.setBeforePan(this.options.beforePan),c.setOnPan(this.options.onPan),c.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&o.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},c.prototype.setupHandlers=function(){var t=this,e=null;if(this.eventListeners={mousedown:function(n){var i=t.handleMouseDown(n,e);return e=n,i},touchstart:function(n){var i=t.handleMouseDown(n,e);return e=n,i},mouseup:function(e){return t.handleMouseUp(e)},touchend:function(e){return t.handleMouseUp(e)},mousemove:function(e){return t.handleMouseMove(e)},touchmove:function(e){return t.handleMouseMove(e)},mouseleave:function(e){return t.handleMouseUp(e)},touchleave:function(e){return t.handleMouseUp(e)},touchcancel:function(e){return t.handleMouseUp(e)}},null!=this.options.customEventsHandler){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var i=n.length-1;i>=0;i--)this.eventListeners.hasOwnProperty(n[i])&&delete this.eventListeners[n[i]]}for(var o in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(o,this.eventListeners[o],!1);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},c.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var t=this;this.wheelListener=function(e){return t.handleMouseWheel(e)},i.on(this.options.eventsListenerElement||this.svg,this.wheelListener,!1),this.options.mouseWheelZoomEnabled=!0}},c.prototype.disableMouseWheelZoom=function(){this.options.mouseWheelZoomEnabled&&(i.off(this.options.eventsListenerElement||this.svg,this.wheelListener,!1),this.options.mouseWheelZoomEnabled=!1)},c.prototype.handleMouseWheel=function(t){if(this.options.zoomEnabled&&"none"===this.state){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1);var e=t.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,i=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in t&&0===t.deltaMode&&t.wheelDelta&&(e=0===t.deltaY?0:Math.abs(t.wheelDelta)/t.deltaY),e=-.3<e&&e<.3?e:(e>0?1:-1)*Math.log(Math.abs(e)+10)/i;var o=this.svg.getScreenCTM().inverse(),r=a.getEventPoint(t,this.svg).matrixTransform(o),s=Math.pow(1+this.options.zoomScaleSensitivity,-1*e);this.zoomAtPoint(s,r)}},c.prototype.zoomAtPoint=function(t,e,n){var i=this.viewport.getOriginalState();n?(t=Math.max(this.options.minZoom*i.zoom,Math.min(this.options.maxZoom*i.zoom,t)),t/=this.getZoom()):this.getZoom()*t<this.options.minZoom*i.zoom?t=this.options.minZoom*i.zoom/this.getZoom():this.getZoom()*t>this.options.maxZoom*i.zoom&&(t=this.options.maxZoom*i.zoom/this.getZoom());var o=this.viewport.getCTM(),r=e.matrixTransform(o.inverse()),a=this.svg.createSVGMatrix().translate(r.x,r.y).scale(t).translate(-r.x,-r.y),s=o.multiply(a);s.a!==o.a&&this.viewport.setCTM(s)},c.prototype.zoom=function(t,e){this.zoomAtPoint(t,a.getSvgCenterPoint(this.svg,this.width,this.height),e)},c.prototype.publicZoom=function(t,e){e&&(t=this.computeFromRelativeZoom(t)),this.zoom(t,e)},c.prototype.publicZoomAtPoint=function(t,e,n){if(n&&(t=this.computeFromRelativeZoom(t)),"SVGPoint"!==r.getType(e)){if(!("x"in e&&"y"in e))throw new Error("Given point is invalid");e=a.createSVGPoint(this.svg,e.x,e.y)}this.zoomAtPoint(t,e,n)},c.prototype.getZoom=function(){return this.viewport.getZoom()},c.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},c.prototype.computeFromRelativeZoom=function(t){return t*this.viewport.getOriginalState().zoom},c.prototype.resetZoom=function(){var t=this.viewport.getOriginalState();this.zoom(t.zoom,!0)},c.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},c.prototype.reset=function(){this.resetZoom(),this.resetPan()},c.prototype.handleDblClick=function(t){var e;if((this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.options.controlIconsEnabled)&&(t.target.getAttribute("class")||"").indexOf("svg-pan-zoom-control")>-1)return!1;e=t.shiftKey?1/(2*(1+this.options.zoomScaleSensitivity)):2*(1+this.options.zoomScaleSensitivity);var n=a.getEventPoint(t,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(e,n)},c.prototype.handleMouseDown=function(t,e){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),r.mouseAndTouchNormalize(t,this.svg),this.options.dblClickZoomEnabled&&r.isDblClick(t,e)?this.handleDblClick(t):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=a.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()))},c.prototype.handleMouseMove=function(t){if(this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),"pan"===this.state&&this.options.panEnabled){var e=a.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(e.x-this.stateOrigin.x,e.y-this.stateOrigin.y);this.viewport.setCTM(n)}},c.prototype.handleMouseUp=function(t){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),"pan"===this.state&&(this.state="none")},c.prototype.fit=function(){var t=this.viewport.getViewBox(),e=Math.min(this.width/t.width,this.height/t.height);this.zoom(e,!0)},c.prototype.contain=function(){var t=this.viewport.getViewBox(),e=Math.max(this.width/t.width,this.height/t.height);this.zoom(e,!0)},c.prototype.center=function(){var t=this.viewport.getViewBox(),e=.5*(this.width-(t.width+2*t.x)*this.getZoom()),n=.5*(this.height-(t.height+2*t.y)*this.getZoom());this.getPublicInstance().pan({x:e,y:n})},c.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},c.prototype.pan=function(t){var e=this.viewport.getCTM();e.e=t.x,e.f=t.y,this.viewport.setCTM(e)},c.prototype.panBy=function(t){var e=this.viewport.getCTM();e.e+=t.x,e.f+=t.y,this.viewport.setCTM(e)},c.prototype.getPan=function(){var t=this.viewport.getState();return{x:t.x,y:t.y}},c.prototype.resize=function(){var t=a.getBoundingClientRectNormalized(this.svg);this.width=t.width,this.height=t.height;var e=this.viewport;e.options.width=this.width,e.options.height=this.height,e.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},c.prototype.destroy=function(){var t=this;for(var e in this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,null!=this.options.customEventsHandler&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()}),this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(e,this.eventListeners[e],!1);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),l=l.filter(function(e){return e.svg!==t.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},c.prototype.getPublicInstance=function(){var t=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return t.options.panEnabled=!0,t.pi},disablePan:function(){return t.options.panEnabled=!1,t.pi},isPanEnabled:function(){return!!t.options.panEnabled},pan:function(e){return t.pan(e),t.pi},panBy:function(e){return t.panBy(e),t.pi},getPan:function(){return t.getPan()},setBeforePan:function(e){return t.options.beforePan=null===e?null:r.proxy(e,t.publicInstance),t.pi},setOnPan:function(e){return t.options.onPan=null===e?null:r.proxy(e,t.publicInstance),t.pi},enableZoom:function(){return t.options.zoomEnabled=!0,t.pi},disableZoom:function(){return t.options.zoomEnabled=!1,t.pi},isZoomEnabled:function(){return!!t.options.zoomEnabled},enableControlIcons:function(){return t.options.controlIconsEnabled||(t.options.controlIconsEnabled=!0,o.enable(t)),t.pi},disableControlIcons:function(){return t.options.controlIconsEnabled&&(t.options.controlIconsEnabled=!1,o.disable(t)),t.pi},isControlIconsEnabled:function(){return!!t.options.controlIconsEnabled},enableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!0,t.pi},disableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!1,t.pi},isDblClickZoomEnabled:function(){return!!t.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return t.enableMouseWheelZoom(),t.pi},disableMouseWheelZoom:function(){return t.disableMouseWheelZoom(),t.pi},isMouseWheelZoomEnabled:function(){return!!t.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(e){return t.options.zoomScaleSensitivity=e,t.pi},setMinZoom:function(e){return t.options.minZoom=e,t.pi},setMaxZoom:function(e){return t.options.maxZoom=e,t.pi},setBeforeZoom:function(e){return t.options.beforeZoom=null===e?null:r.proxy(e,t.publicInstance),t.pi},setOnZoom:function(e){return t.options.onZoom=null===e?null:r.proxy(e,t.publicInstance),t.pi},zoom:function(e){return t.publicZoom(e,!0),t.pi},zoomBy:function(e){return t.publicZoom(e,!1),t.pi},zoomAtPoint:function(e,n){return t.publicZoomAtPoint(e,n,!0),t.pi},zoomAtPointBy:function(e,n){return t.publicZoomAtPoint(e,n,!1),t.pi},zoomIn:function(){return this.zoomBy(1+t.options.zoomScaleSensitivity),t.pi},zoomOut:function(){return this.zoomBy(1/(1+t.options.zoomScaleSensitivity)),t.pi},getZoom:function(){return t.getRelativeZoom()},setOnUpdatedCTM:function(e){return t.options.onUpdatedCTM=null===e?null:r.proxy(e,t.publicInstance),t.pi},resetZoom:function(){return t.resetZoom(),t.pi},resetPan:function(){return t.resetPan(),t.pi},reset:function(){return t.reset(),t.pi},fit:function(){return t.fit(),t.pi},contain:function(){return t.contain(),t.pi},center:function(){return t.center(),t.pi},updateBBox:function(){return t.updateBBox(),t.pi},resize:function(){return t.resize(),t.pi},getSizes:function(){return{width:t.width,height:t.height,realZoom:t.getZoom(),viewBox:t.viewport.getViewBox()}},destroy:function(){return t.destroy(),t.pi}}),this.publicInstance};var l=[];e.exports=function(t,e){var n=r.getSvg(t);if(null===n)return null;for(var i=l.length-1;i>=0;i--)if(l[i].svg===n)return l[i].instance.getPublicInstance();return l.push({svg:n,instance:new c(n,e)}),l[l.length-1].instance.getPublicInstance()}},{"./control-icons":2,"./shadow-viewport":3,"./svg-utilities":5,"./uniwheel":6,"./utilities":7}],5:[function(t,e,n){var i=t("./utilities"),o="unknown";document.documentMode&&(o="ie"),e.exports={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(t){if(t.clientWidth&&t.clientHeight)return{width:t.clientWidth,height:t.clientHeight};if(t.getBoundingClientRect())return t.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(t,e){var n=null;if(!(n=i.isElement(e)?e:t.querySelector(e))){var o=Array.prototype.slice.call(t.childNodes||t.children).filter(function(t){return"defs"!==t.nodeName&&"#text"!==t.nodeName});1===o.length&&"g"===o[0].nodeName&&null===o[0].getAttribute("transform")&&(n=o[0])}if(!n){var r="viewport-"+(new Date).toISOString().replace(/\D/g,"");(n=document.createElementNS(this.svgNS,"g")).setAttribute("id",r);var a=t.childNodes||t.children;if(a&&a.length>0)for(var s=a.length;s>0;s--)"defs"!==a[a.length-s].nodeName&&n.appendChild(a[a.length-s]);t.appendChild(n)}var c=[];return n.getAttribute("class")&&(c=n.getAttribute("class").split(" ")),~c.indexOf("svg-pan-zoom_viewport")||(c.push("svg-pan-zoom_viewport"),n.setAttribute("class",c.join(" "))),n},setupSvgAttributes:function(t){if(t.setAttribute("xmlns",this.svgNS),t.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),t.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),null!==t.parentNode){var e=t.getAttribute("style")||"";-1===e.toLowerCase().indexOf("overflow")&&t.setAttribute("style","overflow: hidden; "+e)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:i.throttle(function(){for(var t=document.querySelectorAll("defs"),e=t.length,n=0;n<e;n++){var i=t[n];i.parentNode.insertBefore(i,i)}},this.internetExplorerRedisplayInterval),setCTM:function(t,e,n){var i=this,r="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttributeNS(null,"transform",r),"transform"in t.style?t.style.transform=r:"-ms-transform"in t.style?t.style["-ms-transform"]=r:"-webkit-transform"in t.style&&(t.style["-webkit-transform"]=r),"ie"===o&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){i.refreshDefsGlobal()},i.internetExplorerRedisplayInterval))},getEventPoint:function(t,e){var n=e.createSVGPoint();return i.mouseAndTouchNormalize(t,e),n.x=t.clientX,n.y=t.clientY,n},getSvgCenterPoint:function(t,e,n){return this.createSVGPoint(t,e/2,n/2)},createSVGPoint:function(t,e,n){var i=t.createSVGPoint();return i.x=e,i.y=n,i}}},{"./utilities":7}],6:[function(t,e,n){e.exports=function(){function t(t,e,i,s){var c;c="wheel"===o?i:function(t,e,n){var i=function(t){!t&&(t=window.event);var n={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==o?(n.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(n.deltaX=-.025*t.wheelDeltaX)):n.deltaY=t.detail,e(n)};return a.push({element:t,fn:i,capture:n}),i}(t,i,s),t[n](r+e,c,s||!1)}function e(t,e,n,s){var c;c="wheel"===o?n:function(t,e){for(var n=0;n<a.length;n++)if(a[n].element===t&&a[n].capture===e)return a[n].fn;return function(){}}(t,s),t[i](r+e,c,s||!1),function(t,e){for(var n=0;n<a.length;n++)if(a[n].element===t&&a[n].capture===e)return a.splice(n,1)}(t,s)}var n,i,o,r="",a=[];return window.addEventListener?(n="addEventListener",i="removeEventListener"):(n="attachEvent",i="detachEvent",r="on"),o="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",{on:function(e,n,i){t(e,o,n,i),"DOMMouseScroll"==o&&t(e,"MozMousePixelScroll",n,i)},off:function(t,n,i){e(t,o,n,i),"DOMMouseScroll"==o&&e(t,"MozMousePixelScroll",n,i)}}}()},{}],7:[function(t,e,n){function i(t){return function(e){window.setTimeout(e,t)}}e.exports={extend:function(t,e){for(var n in t=t||{},e)this.isObject(e[n])?t[n]=this.extend(t[n],e[n]):t[n]=e[n];return t},isElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement||t instanceof SVGSVGElement||t&&"object"==(void 0===t?"undefined":r()(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},getSvg:function(t){var e,n;if(this.isElement(t))e=t;else{if(!("string"==typeof t||t instanceof String))throw new Error("Provided selector is not an HTML object nor String");if(!(e=document.querySelector(t)))throw new Error("Provided selector did not find any elements. Selector: "+t)}if("svg"===e.tagName.toLowerCase())n=e;else if("object"===e.tagName.toLowerCase())n=e.contentDocument.documentElement;else{if("embed"!==e.tagName.toLowerCase())throw"img"===e.tagName.toLowerCase()?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");n=e.getSVGDocument().documentElement}return n},proxy:function(t,e){return function(){return t.apply(e,arguments)}},getType:function(t){return Object.prototype.toString.apply(t).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(t,e){if(void 0===t.clientX||null===t.clientX)if(t.clientX=0,t.clientY=0,void 0!==t.touches&&t.touches.length){if(void 0!==t.touches[0].clientX)t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY;else if(void 0!==t.touches[0].pageX){var n=e.getBoundingClientRect();t.clientX=t.touches[0].pageX-n.left,t.clientY=t.touches[0].pageY-n.top}}else void 0!==t.originalEvent&&void 0!==t.originalEvent.clientX&&(t.clientX=t.originalEvent.clientX,t.clientY=t.originalEvent.clientY)},isDblClick:function(t,e){if(2===t.detail)return!0;if(void 0!==e&&null!==e){var n=t.timeStamp-e.timeStamp,i=Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2));return n<250&&i<10}return!1},now:Date.now||function(){return(new Date).getTime()},throttle:function(t,e,n){var i,o,r,a=this,s=null,c=0;n||(n={});var d=function(){c=!1===n.leading?0:a.now(),s=null,r=t.apply(i,o),s||(i=o=null)};return function(){var l=a.now();c||!1!==n.leading||(c=l);var f=e-(l-c);return i=this,o=arguments,f<=0||f>e?(clearTimeout(s),s=null,c=l,r=t.apply(i,o),s||(i=o=null)):s||!1===n.trailing||(s=setTimeout(d,f)),r}},createRequestAnimationFrame:function(t){var e=null;return"auto"!==t&&t<60&&t>1&&(e=Math.floor(1e3/t)),null===e?window.requestAnimationFrame||i(33):i(e)}}},{}]},{},[1])},uski:function(t,e,n){"use strict";var i={renderGroup:function(t,e,n){var i=30*(e.nodes||[]).length+30,o=t.rect({x:0,y:0,width:200,height:i,fill:"rgba(0,0,0,0.1)",rx:4,ry:4}),r=t.rect({x:0,y:0,width:200,height:30,fill:"#3E7E9C"}),a=t.text(50,20,e.name).attr({style:"font-size:12px",fill:"#fff"});return t.group(o,r,a).addClass("hover-move")},renderNode:function(t,e,n){var i=e,o=t.rect(0,30,200,30).attr({fill:"#cbeae1",stroke:"#fff"}),r=t.text(50,50,i.name).attr({style:"font-size:12px"});return t.g(o,r).attr({transform:"translate(0,"+30*n+")"})},renderPort:function(t,e,n,i,o){var r=t.circle(0,0,0);return"left"==e.direction&&(r=t.circle(0,45,0).attr({fill:"rgb(49, 208, 198)"}).addClass("hover-opacity")),"right"==e.direction&&(r=t.circle(200,45,0).attr({fill:"rgb(49, 208, 198)"}).addClass("hover-opacity")),r}},o=200,r=30,a=5,s={renderGroup:function(t,e,n){return t.g()},renderNode:function(t,e,n){var i=o,a=r,s=t.rect(0,0,i,a,10,10).attr({fill:Snap.mui.amber[300],stroke:Snap.mui.amber[600]});return t.g(s).attr({transform:"translate(0,"+a*n+")"})},renderPort:function(t,e,n,i,s){var c=void 0,d=void 0;"left"==e.direction?(c=0,d=r/2):"right"==e.direction?(c=o,d=r/2):"up"==e.direction?(c=o/2,d=0):(c=o/2,d=r);var l=a;return t.circle(c,d,l).attr({fill:"green"})}};n.d(e,"b",function(){return d});var c={table:i,default:s},d=function(t,e){c[t]=e};e.a=c},vB7J:function(t,e){},zfUT:function(t,e,n){"use strict";(function(t){var i=n("IHPB"),o=n.n(i),r=n("AA3o"),a=n.n(r),s=n("xSur"),c=n.n(s),d=n("uski"),l=n("f1rb"),f=n("Z5r6"),u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a()(this,e),this.dom=t,this.el=Snap(t).g(),this.el.addClass("tflow-unselectable"),this.groups=[],this.links=[],this.startx=null,this.starty=null,this.status=0,this.lineStartx=null,this.lineStarty=null,this.lineEndx=null,this.lineEndy=null,this.tempLink=null,this.tempLinkEnt=null,this.config=this._mergeConfig(o),this.groupRenderers=d.a[this.config.groupRender]||d.a.default,this.connectionRenderers=l.a[this.config.groupRender]||l.a.default,this.groupDoms=[],this.linkDoms=[],this._init(n,i),this._initEvent()}return c()(e,[{key:"_init",value:function(t,e){t=t||[],e=e||[],this.groupRenderers.init&&this.groupRenderers.init(this),this.connectionRenderers.init&&this.connectionRenderers.init(this),t.forEach(this.addGroup,this),e.forEach(this.addLink,this)}},{key:"_initEvent",value:function(){if(this.config.zoom){n("rcH3");svgPanZoom(this.dom,{fit:!1,zoomScaleSensitivity:.5})}}},{key:"getGroupsData",value:function(){return this.groups}},{key:"getLinksData",value:function(){return this.links}},{key:"addGroup",value:function(t){var e=this._drawGroup(t);return this.config.ondrawngroup(e),this.groups.push(t),this.groupDoms.push(e),e}},{key:"addLink",value:function(t){t.id||(t.id=f());var e=this._drawLine(t);return this.config.onlinkconnected(e,t),this.links.push(t),this.linkDoms.push(e),e}},{key:"reRenderLinks",value:function(t){this.linkDoms.forEach(function(t){return t.remove()}),this.links=[],t.forEach(this.addLink,this)}},{key:"_mergeConfig",value:function(e){return t.extend({},{groupRender:"default",connectionRender:"default",gridSize:30,zoom:!1,onlinkconnecting:function(t){},onlinkconnected:function(t){},ondrawngroup:function(t){},connectionConfig:{},groupConfig:{}},e)}},{key:"_renderGroup",value:function(t,e){var n=this;t.id||(t.id=f());var i=this.groupRenderers.renderGroup(this.el,t,e,this),o=t.position||[0,0];return i.attr({transform:"translate("+o[0]+","+o[1]+")","g-name":t.name,"g-id":t.id,"f-type":"group"}).drag(function(t,e,o,r,a){a.stopPropagation(),n._handleOnMove(t,e,o,r,a,i)},function(t,e,o){o.stopPropagation(),n._handleOnStart(t,e,o,i)},function(t){t.stopPropagation(),n._handleOnEnd(t,i)}).addClass("hover-move"),i}},{key:"_renderNode",value:function(t,e,n){t.id||(t.id=f());var i=this.groupRenderers.renderNode(this.el,t,e,this);return i.attr({"g-id":n.id,"n-id":t.id,"f-type":"node"}),i}},{key:"_renderPort",value:function(t,e,n,i,o){t.id||(t.id=f());var r=this.groupRenderers.renderPort(this.el,t,e,n,i,o);return r.attr({joint:!0,"n-port":t.direction,"g-name":o.name,"n-id":n.id,"g-id":o.id,"p-id":t.id,"f-type":"port"}),r}},{key:"_handleOnStart",value:function(t,e,n,i){var o=i.transform().localMatrix;if(this.startx=o.e,this.starty=o.f,n.target.hasAttribute("joint")){var r=o.e,a=o.f;this.status=0,this.lineStartx=parseFloat(n.target.getAttribute("cx"))+parseFloat(r),this.lineStarty=parseFloat(n.target.getAttribute("cy"))+parseFloat(a);var s=n.target.getAttribute("g-id"),c=n.target.getAttribute("n-id"),d=n.target.getAttribute("p-id"),l=n.target.getAttribute("n-port");this.tempLink={id:f(),type:"guide",source:{groupId:s,nodeId:c,portId:d,port:l}}}else this.status=1}},{key:"_handleOnMove",value:function(t,e,n,i,o,r){var a=r.transform().globalMatrix,s=r.transform().localMatrix,c=a.a;if(0==this.status)this.lineEndx=this.lineStartx+t,this.lineEndy=this.lineStarty+e,this._drawTempLine(this.lineEndx,this.lineEndy);else{var d=Snap.snapTo(this.config.gridSize*c,this.startx+t/c,1e6),l=Snap.snapTo(this.config.gridSize*c,this.starty+e/c,1e6),f=s.e,u=s.f;if(f==d&&u==l)return;r.attr({transform:"translate("+d+","+l+")"});var p=r.node.getAttribute("g-id");this.groups.find(function(t){return t.id==p}).position=[d,l],this.lineFollowing(r)}}},{key:"_handleOnEnd",value:function(t,e){0==this.status?this._drawLineEnd(t):this._dragTableEnd(t)}},{key:"_dragTableEnd",value:function(t){}},{key:"_drawLineEnd",value:function(e){if(!e.target.hasAttribute("joint"))return this.tempLinkEnt.clear();if(e.target.getAttribute("g-id")==this.tempLink.source.groupId)return this.tempLinkEnt.clear();var n=e.target.getAttribute("g-id"),i=e.target.getAttribute("n-id"),o=e.target.getAttribute("p-id"),r=e.target.getAttribute("n-port");this.tempLink.target={groupId:n,nodeId:i,portId:o,port:r},this.tempLink.type="link";var a=t.cloneDeep(this.tempLink);this.addLink(a)}},{key:"_drawTempLine",value:function(t,e){this.tempLink.target={position:[t,e]},this.tempLinkEnt=this._drawLine(this.tempLink)}},{key:"_drawLine",value:function(t){var e=this.connectionRenderers.drawLine(this.el,t,this);return this.config.onlinkconnecting(e,t),e.attr({"f-type":"link"}),e}},{key:"_drawGroup",value:function(t){var e,n=this,i=this._renderGroup(t),r=t.nodes;if(r&&r instanceof Array){var a=r.map(function(e,i){var r,a=e.ports;if(!(a&&a instanceof Array))return n._renderNode(e,i,t);var s=n._renderNode(e,i,t),c=a.map(function(o,r){return n._renderPort(o,r,e,i,t)},n);return s.append((r=Snap).set.apply(r,o()(c))),s},this);return i.append((e=Snap).set.apply(e,o()(a))),i}}},{key:"lineFollowing",value:function(t){var e=this,n=t.node.getAttribute("g-id");this.links.filter(function(t){return t.source.groupId==n||t.target.groupId==n}).forEach(function(t){return e._drawLine(t)})}}]),e}();e.a=u}).call(e,n("Y0Uy"))}},["NHnr"]);
//# sourceMappingURL=app.f0d0624939506c3c8e29.js.map